!function(x){function e(){var e=parseInt(x("#input-right").attr("min")),t=parseInt(x("#input-right").attr("max")),i=Math.max(parseInt(x("#input-right").val())),t=(i-e)/(t-e)*100,e=x("input[name=turn_photo]").val(),n=+i/100;x("#input-right").val(i),x(".slider > .thumb.right").css("right",100-t+"%"),x(".slider > .range").css("right",100-t+"%"),x("#user_photo_ajax").css("transform",`rotate(${+e}deg) scale(${n})`)}x(document).on("click",function(e){x(e.target).closest(".input-hidden, #name_inst_id, #address_lpu_id, #type_inst_id, input[name=update_speciality], input[name=register_speciality], #city_id").length||(x("body").find(".name_lpu").removeClass("active"),x("body").find(".type_of_inst").removeClass("active"),x("body").find(".city_array").removeClass("active"),x("body").find(".name_inst").removeClass("active"),x("body").find(".register_address").removeClass("active"),x(".select-hidden").find(".select-btn").css("z-index","1"),x(".input-hidden").css("display","block"),x("input[name=update_speciality]").css("display","none"),x("input[name=update_type_institution]").css("display","none"),x("input[name=register_speciality]").css("display","none"),x("input[name=register_type_institution]").css("display","none"))}),x(".name_lpu").html(["Не выбрана","Аллерголог","Вертебролог","ВОП","Врач ЛФК","Врач функциональной диагностики","Гастроэнтеролог","Гепатолог","Гинеколог","Гомеопат","Дерматолог","Иммунолог","Инфекционист","Кардиолог","Клинический формаколог","Косметолог","ЛОР","Массажист","Невролог","Нефролог","Окулист","Ортодонт","Ортопед","Отоневролог","Педиатр","Пластический хирург","Психиатр","Психолог","Пульмонолог","Реабилитолог","Ревматолог","Рефлексотерапевт","Семейный врач","Сомнолог","Сосудистый хирург","Спортивный врач","Стоматолог","Терапевт","Травматолог","Уролог","Флеболог","Хирург","Эндокринолог","Другая специальность"].map(e=>`<div class="item">${e}</div>`)),x(".type_of_inst").html(["Искать по всем типам","Амбулатория","Больница","Госпиталь","Детская больница","Детская поликлиника","Диагностический центр","Диспансер","Дом престарелых, инвалидов","Железнодорожная больница / поликлиника / амбулатория","Женская консультация","Кабинет, пункт, станция","Клиника","Лечебно-диагностический центр","Медико-санитарная часть","Медицинский центр","Медицинское объединение","Наркологический центр (клиника, амбулатория, диспансер)","НИИ","Патологоанатомическое бюро","Перинатальный центр","Поликлиника","Родильный дом","Стационар","Стоматологическая поликлиника","Хоспис","Центр реабилитации","Центр семьи","Диагностическая лаборатория"].map(e=>`<div class="item">${e}</div>`)),x(".input-hidden").on("click",function(){x(this).css("display","none"),x(this).next("input[type=text]").css("display","block"),x(this).parents(".select-hidden").find(".select-btn").css("z-index","-10")}),x("input[name=update_speciality]").on("focus",function(){x(this).next(".name_lpu").addClass("active"),x(".type_of_inst").removeClass("active")}),x("input[name=update_type_institution]").on("focus",function(){x(this).next(".type_of_inst").addClass("active"),x(".name_lpu").removeClass("active")}),x("input[name=register_speciality]").on("focus",function(){x(this).next(".name_lpu").addClass("active"),x(".type_of_inst").removeClass("active")}),x("input[name=register_type_institution]").on("focus",function(){x(this).next(".type_of_inst").addClass("active"),x(".name_lpu").removeClass("active")}),x("#city_id").on("focus",function(){x(this).next(".city_array").addClass("active")}),x("#name_inst_id").on("focus",function(){x(this).next(".name_inst").addClass("active")}),x("#address_lpu_id").on("focus",function(){x(this).next(".register_address").addClass("active")}),x(".name_lpu").on("click",".item",function(){x(this).parents(".register_speciality_hidden").find(".input-hidden").text(x(this).text()),x(this).parents(".register_speciality_hidden").find(".input-hidden").css("display","block"),x(this).parents(".register_speciality_hidden").find("input[type=text]").css("display","none"),x(this).parents(".register_speciality_hidden").find("input[type=text]").val(x(this).text()),x(this).parents(".register_speciality_hidden").find(".name_lpu").removeClass("active")}),x(".type_of_inst").on("click",".item",function(){x(this).parents(".register_address_hidden").find(".input-hidden").text(x(this).text()),x(this).parents(".register_address_hidden").find(".input-hidden").css("display","block"),x(this).parents(".register_address_hidden").find("input[type=text]").css("display","none"),x(this).parents(".register_address_hidden").find("input[type=text]").val(x(this).text()),x(this).parents(".register_address_hidden").find(".type_of_inst").removeClass("active")}),x(".label-radio").each(function(){var e;x(this).find("input[name=place_of_work]").is(":checked")&&("register_name_lpu"==(e=x(this).find("input[name=place_of_work]").val())?x(".register_name_lpu_hidden").addClass("active-disabled"):x(".register_name_lpu_hidden").removeClass("active-disabled"),"register_address"==e?x(".register_address_hidden").addClass("active-disabled"):x(".register_address_hidden").removeClass("active-disabled"))}),x(".label-radio").on("click",function(){"register_name_lpu"===x(this).find("input[name=place_of_work]").val()?(x(".register_name_lpu_hidden").addClass("active-disabled"),x(".register_address_hidden").removeClass("active-disabled"),x("#address_lpu_id").removeClass("error-required"),x(".lpu_content").removeClass("error-required"),x("#address_lpu_id").val(""),x("#address_lpu_id2").removeClass("error-required"),x("#address_lpu_id2").val(""),x(".lpu_content span").text("Начните вводить адрес ЛПУ"),x(".label-error-address-lpu").removeClass("active")):(x(".register_name_lpu_hidden").removeClass("active-disabled"),x(".register_address_hidden").addClass("active-disabled"),x("#name_inst_id").removeClass("error-required"),x(".inst_content").removeClass("error-required"),x("#name_inst_id").val(""),x("#type_inst_id").removeClass("error-required"),x("#type_inst_id").val(""),x("#type_inst_id").prev(".input-hidden").removeClass("error-required"),x("#type_inst_id").prev(".input-hidden").text("Искать по всем типам"),x(".inst_content span").text("Начните вводить название учреждения"))}),x("input[type=tel]").mask("+7 ( 9 9 9 ) 9 9 9 - 9 9 - 9 9"),x("input[type=tel]").attr("placeholder","+7 ( _ _ _ ) _ _ _ - _ _ - _ _"),x(".log-in-btn").on("click",function(){x(".register-section").css("display","none"),x(".forgot-section").css("display","none"),x(".log-in-section").css("display","block"),x(".error-message").text("")}),x(".register-btn").on("click",function(){x(".register-section").css("display","block"),x(".log-in-section").css("display","none"),x(".forgot-section").css("display","none"),x(".error-message").text("")}),x(".forgot-btn").on("click",function(){x(".register-section").css("display","none"),x(".log-in-section").css("display","none"),x(".forgot-section").css("display","block"),x(".error-message").text("")}),x(".close-modal").on("click",function(){x("body").removeClass("overhidden"),x(".popup").fadeOut(300)}),x("#register").on("submit",function(e){if(!function(){let e=x("input[name=personal_data]"),t=!e.val();e.is(":checked"),e.is(":checked")?t=!1:(t=!0,x(".error-message").text("Дайте свое согласие на обработку данных!"));var i=!(n=x("input[name=register_email]")).val(),n=(/^\w+([\.-]?\w+)*@(((([a-z0-9]{2,})|([a-z0-9][-][a-z0-9]+))[\.][a-z0-9])|([a-z0-9]+[-]?))+[a-z0-9]+\.([a-z]{2}|(com|net|org|edu|int|mil|gov|arpa|biz|aero|name|coop|info|pro|ru|museum))$/i.test(n.val())?n.removeClass("error-required"):(i=!0,x(".error-message").text("Вы указали недопустимый e-mail"),n.addClass("error-required")),x("input[name=register_password]")),s=x("input[name=register_password2]"),r=!n.val(),a=!n.val();return n.val()!=s.val()?(a=r=!0,x(".error-message").text("Пароли не совпадают!"),n.addClass("error-required"),s.addClass("error-required")):n.val().length<8||!/(?=.*\d)(?=.*[a-z\а-я])/i.test(x("input[name=register_password]").val())?(a=r=!0,x(".error-message").text("Пароль должен содержать не менее восьми знаков и включать буквы и цифры"),n.addClass("error-required"),s.addClass("error-required")):(n.removeClass("error-required"),s.removeClass("error-required")),t||i||r||a}()){const y=x("#register");var t=x("input[name=register_surname]").val(),i=x("input[name=register_name]").val(),n=x("input[name=register_middle_name]").val(),s=x("input[name=register_city]").val(),r=x("input[name=place_of_work]:checked").val(),a=x("input[name=register_address_lpu]").val(),d=x("input[name=register_address_lpu2]").val(),p=x("input[name=register_type_institution]").val(),o=x("input[name=register_name_institution]").val(),u=x("input[name=register_speciality]").val(),l=x("input[name=register_email]").val(),_=x("input[name=register_password]").val(),c=x("input[name=register_password2]").val(),m=x("input[name=register_phone]").val(),h=x("input[name=personal_data]").prop("checked"),v=x("input[name=notifications]").prop("checked"),g=x("#register_security").val(),f=x("input[name=email_status]").val();return x.ajax({type:"POST",url:ajax_auth_object.ajaxurl,data:{action:"ajax_register",register_surname:t,register_name:i,register_middle_name:n,register_city:s,place_of_work:r,register_address_lpu:a,register_address_lpu2:d,register_type_institution:p,register_name_institution:o,register_speciality:u,register_email:l,register_password:_,register_password2:c,register_phone:m,personal_data:h,notifications:v,security:g,email_status:f},dataType:"json",beforeSend:function(){x(".send-btn").text("Загрузка...")},success:function(e){console.log(e),e.loggedin?(y[0].reset(),x(".user-email").text(e.user_email),x("body").addClass("overhidden"),x(".popup-register").fadeIn(300)):(x(".error-message").text(e.message),2<=e.info.last_name.length?x("input[name=register_surname]").removeClass("error-required"):x("input[name=register_surname]").addClass("error-required"),2<=e.info.first_name.length?x("input[name=register_name]").removeClass("error-required"):x("input[name=register_name]").addClass("error-required"),2<=e.info.register_middle_name.length?x("input[name=register_middle_name]").removeClass("error-required"):x("input[name=register_middle_name]").addClass("error-required"),2<=e.info.register_city.length?(x("input[name=register_city]").removeClass("error-required"),x(".city_content").removeClass("error-required")):(x("input[name=register_city]").addClass("error-required"),x(".city_content").addClass("error-required")),2<=e.info.register_speciality.length?(x("input[name=register_speciality]").removeClass("error-required"),x("input[name=register_speciality]").prev(".input-hidden").removeClass("error-required")):(x("input[name=register_speciality]").addClass("error-required"),x("input[name=register_speciality]").prev(".input-hidden").addClass("error-required")),2<=e.info.user_email.length?x("input[name=register_email]").removeClass("error-required"):x("input[name=register_email]").addClass("error-required"),2<=e.info.user_pass.length?x("input[name=register_password]").removeClass("error-required"):x("input[name=register_password]").addClass("error-required"),2<=e.info.register_phone.length?x("input[name=register_phone]").removeClass("error-required"):x("input[name=register_phone]").addClass("error-required"),("register_name_lpu"===e.info.place_of_work?(2<=e.info.register_type_institution.length?(x("input[name=register_type_institution]").removeClass("error-required"),x("input[name=register_type_institution]").prev(".input-hidden").removeClass("error-required")):(x("input[name=register_type_institution]").addClass("error-required"),x("input[name=register_type_institution]").prev(".input-hidden").addClass("error-required")),2<=e.info.register_name_institution.length?(x("input[name=register_name_institution]").removeClass("error-required"),x(".inst_content").removeClass("error-required")):(x("input[name=register_name_institution]").addClass("error-required"),x(".inst_content").addClass("error-required")),x("input[name=register_address_lpu]")):(2<=e.info.register_address_lpu.length?(x("input[name=register_address_lpu]").removeClass("error-required"),x(".lpu_content").removeClass("error-required")):(x("input[name=register_address_lpu]").addClass("error-required"),x(".lpu_content").addClass("error-required")),x("input[name=register_name_institution]").removeClass("error-required"),x("input[name=register_type_institution]").removeClass("error-required"),x("input[name=register_type_institution]").prev(".input-hidden"))).removeClass("error-required")),x(".send-btn").text("Зарегистрироваться")}}),!1}e.preventDefault()}),x("#login").on("submit",function(){const t=x(this);var e=x("input[name=username]").val(),i=x("input[name=password]").val(),n=x("input[name=remember]").val(),s=x("#security").val();return x.ajax({type:"POST",url:ajax_auth_object.ajaxurl,data:{action:"ajax_login",username:e,password:i,remember:n,security:s},dataType:"json",beforeSend:function(){x(".send-btn").text("Загрузка...")},success:function(e){e.loggedin?t[0].reset():x(".error-message").text(e.message),x(".send-btn").text("Войти"),1==e.loggedin&&(document.location.href=ajax_auth_object.redirecturl)}}),!1}),x("#update_profile").on("submit",function(){var e=x("input[name=update_last_name]").val(),t=x("input[name=update_first_name]").val(),i=x("input[name=update_middle_name]").val(),n=x("input[name=update_city]").val(),s=x("input[name=place_of_work]:checked").val(),r=x("input[name=update_address_lpu]").val(),a=x("input[name=update_address_lpu2]").val(),d=x("input[name=update_type_institution]").val(),p=x("input[name=update_name_institution]").val(),o=x("input[name=update_speciality]").val(),u=x("input[name=update_email]").val(),l=x("input[name=pwd1]").val(),_=x("input[name=pwd2]").val(),c=x("input[name=pwd3]").val(),m=x("input[name=update_phone]").val(),h=x("#update_security").val();return x.ajax({type:"POST",url:ajax_auth_object.ajaxurl,data:{action:"ajax_update_profile",update_last_name:e,update_first_name:t,update_middle_name:i,update_city:n,place_of_work:s,update_address_lpu:r,update_address_lpu2:a,update_type_institution:d,update_name_institution:p,update_speciality:o,update_email:u,pwd1:l,pwd2:_,pwd3:c,update_phone:m,security:h},dataType:"json",beforeSend:function(){x(".send-btn").text("Загрузка...")},success:function(e){console.log(e),e.loggedin?(x("body").addClass("overhidden"),x(".popup-update-profile").fadeIn(300),x("input[name=pwd1]").val(""),x("input[name=pwd2]").val(""),x("input[name=pwd3]").val(""),x("input").removeClass("error-required"),x(".error-message").text("")):(x(".error-message").text(e.message),2<=e.info.update_middle_name.length?x("input[name=update_middle_name]").removeClass("error-required"):x("input[name=update_middle_name]").addClass("error-required"),2<=e.info.update_city.length?x("input[name=update_city]").removeClass("error-required"):x("input[name=update_city]").addClass("error-required"),2<=e.info.update_address_lpu.length?x("input[name=update_address_lpu]").removeClass("error-required"):x("input[name=update_address_lpu]").addClass("error-required"),2<=e.info.update_speciality.length?(x("input[name=update_speciality]").removeClass("error-required"),x("input[name=update_speciality]").prev(".input-hidden").removeClass("error-required")):(x("input[name=update_speciality]").addClass("error-required"),x("input[name=update_speciality]").prev(".input-hidden").addClass("error-required")),2<=e.info.update_phone.length?x("input[name=update_phone]").removeClass("error-required"):x("input[name=update_phone]").addClass("error-required"),2<=e.info.update_email.length?x("input[name=update_email]").removeClass("error-required"):x("input[name=update_email]").addClass("error-required"),2<=e.info.update_last_name.length?x("input[name=update_last_name]").removeClass("error-required"):x("input[name=update_last_name]").addClass("error-required"),2<=e.info.update_first_name.length?x("input[name=update_first_name]").removeClass("error-required"):x("input[name=update_first_name]").addClass("error-required"),("register_name_lpu"===e.info.place_of_work?(2<=e.info.update_type_institution.length?(x("input[name=update_type_institution]").removeClass("error-required"),x("input[name=update_type_institution]").prev(".input-hidden").removeClass("error-required")):(x("input[name=update_type_institution]").addClass("error-required"),x("input[name=update_type_institution]").prev(".input-hidden").addClass("error-required")),2<=e.info.update_name_institution.length?x("input[name=update_name_institution]").removeClass("error-required"):x("input[name=update_name_institution]").addClass("error-required"),x("input[name=update_address_lpu]")):(2<=e.info.update_address_lpu.length?x("input[name=update_address_lpu]").removeClass("error-required"):x("input[name=update_address_lpu]").addClass("error-required"),x("input[name=update_name_institution]").removeClass("error-required"),x("input[name=update_type_institution]").removeClass("error-required"),x("input[name=update_type_institution]").prev(".input-hidden"))).removeClass("error-required")),x(".send-btn").text("Сохранить")}}),!1}),x("#forgot_password").on("submit",function(){var e=x("input[name=user_login]").val(),t=x("#forgot_security").val();return x.ajax({type:"POST",dataType:"json",url:ajax_auth_object.ajaxurl,data:{action:"ajax_forgot_password",user_login:e,security:t},beforeSend:function(){x(".send-btn").text("Загрузка...")},success:function(e){e.loggedin?(x("input[name=user_login]").val(""),x(".user-email").text(e.user_email),x("body").addClass("overhidden"),x(".popup-forgot").fadeIn(300)):x(".error-message").text(e.message),x(".send-btn").text("Отправить")}}),!1}),x("#reset_password").on("submit",function(e){if(s=x("input[name=pwd2]"),r=x("input[name=pwd3]"),t=!s.val(),i=!s.val(),s.val()!=r.val()?(i=t=!0,x(".error-message").text("Пароли не совпадают!")):(s.val().length<8||!/(?=.*\d)(?=.*[a-z\а-я])/i.test(x("input[name=pwd2]").val()))&&(i=t=!0,x(".error-message").text("Пароль должен содержать не менее восьми знаков и включать буквы и цифры")),!t&&!i){r=x("input[name=pwd2]").val(),s=x("input[name=pwd3]").val();const a=window.location.href.split("&").pop(),d=window.location.href.split("?").pop().split("&")[0];var t=a.split("=").pop(),i=d.split("=").pop(),n=x("#reset_password_security").val();return x.ajax({type:"POST",url:ajax_auth_object.ajaxurl,data:{action:"ajax_reset_password",pwd2:r,pwd3:s,security:n,user_login:t,user_key:i},dataType:"json",beforeSend:function(){x(".send-btn").text("Загрузка...")},success:function(e){e.loggedin?(x("input[name=pwd2]").val(""),x("input[name=pwd3]").val(""),x("body").addClass("overhidden"),x(".popup-reset-password").fadeIn(300)):x(".error-message").text(e.message),x(".send-btn").text("Сохранить")}}),!1}var s,r,t,i;e.preventDefault()}),x.getJSON(urlJson).then(i=>{var e=i.map(e=>`${e.CITY_TYPE} ${e.CITY} (${e.REGION} обл.)`);let t=[...new Set(e)];x("#city_id").bind("input",function(){const s=x(this).val();if(0<x(this).val().length){let e=t.filter(e=>-1!==e.indexOf(s));x(".city_array").html(e.map(e=>`<div class="item">${e}</div>`)),x(".city_array .item").each(function(){const e=x(this).text(),t=e.toLowerCase();var i,n=t.indexOf(s.toLowerCase());-1!==n?(n=e.substring(n,s.length+n),i=new RegExp(n,"ig"),i=e.replace(i,`<mark>${n}</mark>`),x(this).html(i).show()):(x(this).text(e),x(this).hide())})}}),x("#name_inst_id").bind("input",function(){const t=x("#city_id").val(),s=x(this).val().toLowerCase();if(0<x(this).val().length){let e=i.filter(e=>""!==t?-1!==e.NAME.toLowerCase().indexOf(s)&&t==`${e.CITY_TYPE} ${e.CITY} (${e.REGION} обл.)`:-1!==e.NAME.toLowerCase().indexOf(s));x(".name_inst").html(e.map(e=>`<div class="item">${e.NAME}</div>`)),x(".name_inst .item").each(function(){const e=x(this).text(),t=e.toLowerCase();var i,n=t.indexOf(s.toLowerCase());-1!==n?(n=e.substring(n,s.length+n),i=new RegExp(n,"ig"),i=e.replace(i,`<mark>${n}</mark>`),x(this).html(i).show()):(x(this).text(e),x(this).hide())})}}),x("#address_lpu_id").bind("input",function(){const t=x("#city_id").val(),s=x(this).val().toLowerCase();if(0<x(this).val().length){let e=i.filter(e=>""!==t?-1!==(`${e.STREET_TYPE} ${e.STREET} ${e.HOUSE}, `+e.NAME).toLowerCase().indexOf(s)&&t==`${e.CITY_TYPE} ${e.CITY} (${e.REGION} обл.)`:-1!==(`${e.STREET_TYPE} ${e.STREET} ${e.HOUSE}, `+e.NAME).toLowerCase().indexOf(s));x(".register_address").addClass("active"),x(".register_address").html(e.map(e=>`<div class="item">${e.STREET_TYPE} ${e.STREET} ${e.HOUSE}, ${e.NAME}</div>`)),x(".register_address .item").each(function(){const e=x(this).text(),t=e.toLowerCase();var i,n=t.indexOf(s.toLowerCase());-1!==n?(n=e.substring(n,s.length+n),i=new RegExp(n,"ig"),i=e.replace(i,`<mark>${n}</mark>`),x(this).html(i).show()):(x(this).text(e),x(this).hide())})}else x(".register_address").removeClass("active"),x(".label-error-address-lpu").removeClass("active");0===Number(x(".register_address .item").length)&&(x(".label-error-address-lpu").addClass("active"),x("#address_lpu_id2").val(s))}),x("#address_lpu_id2").bind("input",function(){0==x(this).val().length&&x(".label-error-address-lpu").removeClass("active")})}),x(".city_array").on("click",".item",function(){x(this).parents(".register_address_hidden").find("input[type=text]").val(x(this).text()),x(this).parents(".register_address_hidden").find(".city_content span").text(x(this).text()),x(this).parents(".register_address_hidden").find(".city_array").removeClass("active")}),x(".name_inst").on("click",".item",function(){x(this).parents(".register_address_hidden").find("input[type=text]").val(x(this).text()),x(this).parent(".name_inst").removeClass("active")}),x(".register_address").on("click",".item",function(){x(this).parents(".register_name_lpu_hidden").find("input[type=text]").val(x(this).text()),x(this).parent(".register_address").removeClass("active")}),x("#address_lpu_id2").on("focus",function(){x("#address_lpu_id").val("")}),x(".city_content").on("click",function(){x(this).css("display","none"),x(this).parents(".input_hidden").find("#city_id").css("display","block")}),x(".city_array").on("click",".item",function(){x(this).parents(".input_hidden").find("input[type=text]").val(x(this).text()),x(this).parents(".input_hidden").find("input[type=text]").css("display","none"),x(this).parents(".input_hidden").find(".city_content span").text(x(this).text()),x(this).parents(".input_hidden").find(".city_content").css("display","flex");var e=x(this).parents(".input_hidden").find(".city_content span").height(),e=(x(this).parents(".input_hidden").find(".city_array").removeClass("active"),e/19);1<e?x(this).parents(".input_hidden").find(".city_content").css("height","69px"):x(this).parents(".input_hidden").find(".city_content").css("height","50px"),3<=e&&(x(this).parents(".input_hidden").find(".city_content").css("height","69px"),x(this).parents(".input_hidden").find(".city_content span").addClass("active"))}),x(".lpu_content").on("click",function(){x(this).css("display","none"),x(this).parents(".input_hidden").find("#address_lpu_id").css("display","block")}),x(".register_address").on("click",".item",function(){x(".label-error-address-lpu").removeClass("active"),x(this).parents(".input_hidden").find("input[type=text]").val(x(this).text()),x(this).parents(".input_hidden").find("input[type=text]").css("display","none"),x(this).parents(".input_hidden").find(".lpu_content span").text(x(this).text()),x(this).parents(".input_hidden").find(".lpu_content").css("display","flex");var e=x(this).parents(".input_hidden").find(".lpu_content span").height(),e=(x(this).parents(".input_hidden").find(".register_address").removeClass("active"),e/19);1<e?x(this).parents(".input_hidden").find(".lpu_content").css("height","69px"):x(this).parents(".input_hidden").find(".lpu_content").css("height","50px"),3<=e&&(x(this).parents(".input_hidden").find(".lpu_content").css("height","69px"),x(this).parents(".input_hidden").find(".lpu_content span").addClass("active"))}),x(".inst_content").on("click",function(){x(this).css("display","none"),x(this).parents(".input_hidden").find("#name_inst_id").css("display","block")}),x(".name_inst").on("click",".item",function(){x(this).parents(".input_hidden").find("input[type=text]").val(x(this).text()),x(this).parents(".input_hidden").find("input[type=text]").css("display","none"),x(this).parents(".input_hidden").find(".inst_content span").text(x(this).text()),x(this).parents(".input_hidden").find(".inst_content").css("display","flex");var e=x(this).parents(".input_hidden").find(".inst_content span").height(),e=(x(this).parents(".input_hidden").find(".name_inst").removeClass("active"),e/19);2==e?x(this).parents(".input_hidden").find(".inst_content").css("height","69px"):3==e?x(this).parents(".input_hidden").find(".inst_content").css("height","88px"):x(this).parents(".input_hidden").find(".inst_content").css("height","50px"),4<=e&&(x(this).parents(".input_hidden").find(".inst_content").css("height","88px"),x(this).parents(".input_hidden").find(".inst_content span").addClass("active_inst"))}),x(".edit_photo").on("click",function(){var e=x(".profile_photo_ajax").attr("src"),t=x(".profile_photo_ajax").attr("style"),i=x(".profile_photo_ajax").data("turn");x("#user_photo_ajax").attr("src",e),x("#user_photo_ajax").attr("style",t),x("input[name=turn_photo]").val(i),x("body").addClass("overhidden"),x(".popup-photo").fadeIn(300)}),x(".svg-question").on("click",function(){x(".text-info").toggleClass("active")}),x("#checkrem").prop("checked",!1),x(".delete-photo").on("click",function(){x(this).next("#checkrem").prop("checked",!0),x("#update_photo_form").submit()}),x("#update_photo_form").on("submit",function(){var e=document.forms.ret;let t=new FormData(e);return t.append("file",x("input[name=update_photo_input]")[0].files[0]),x.ajax({type:"POST",dataType:"json",contentType:!1,processData:!1,url:ajax_auth_object.ajaxurl,data:t,beforeSend:function(){x(".save-photo").text("Загрузка...")},success:function(e){var t;console.log(e),"ok"===e.status?(e.removemyAvatar&&(t=e.site_dir+"/wp-content/uploads/myAvatar/default.jpg",x("#user_photo_ajax").attr("src",t),x(".profile_photo_ajax").attr("src",t)),e.file_name&&(t=e.site_dir+"/wp-content/uploads/myAvatar/"+e.file_name,x("#user_photo_ajax").attr("src",t),x(".profile_photo_ajax").attr("src",t)),x(".profile_photo_ajax").css("transform",`rotate(${+e.turn}deg) scale(${+e.range/100})`),x("#checkrem").prop("checked",!1),x(".text-info").removeClass("active")):x(".text-info").addClass("active"),x(".save-photo").text("Да, сохранить")}}),!1}),x("#update_photo_input").on("change",function(){const e=new FileReader;e.onload=function(){x("#user_photo_ajax").attr("src",e.result)},e.readAsDataURL(x("input[name=update_photo_input]")[0].files[0])}),x(".svg-turn").on("click",function(){var e=x("input[name=turn_photo]").val(),t=+x("input[name=range_slider_photo]").val()/100,e=270<=e?0:Number(x("input[name=turn_photo]").val())+90;x("input[name=turn_photo]").val(+e),x("#user_photo_ajax").css("transform",`rotate(${+e}deg) scale(${t})`)}),e(),x("#input-right").bind("input",e)}(jQuery);